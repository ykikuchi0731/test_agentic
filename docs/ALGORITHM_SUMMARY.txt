================================================================================
CATEGORY HIERARCHY RETRIEVAL ALGORITHM - QUICK REFERENCE
================================================================================

ALGORITHM TYPE:
  Bottom-up tree traversal (child â†’ root)

TIME COMPLEXITY:
  O(h) where h = height of category tree
  
SPACE COMPLEXITY:
  O(h) for storing hierarchy list

API CALLS:
  1 call per category level + 1 for article

================================================================================
STEP-BY-STEP PROCESS
================================================================================

1. START
   â””â”€ Input: category_sys_id from article's kb_category field

2. INITIALIZE
   â””â”€ hierarchy = []  (empty list)
   â””â”€ current = category_sys_id

3. LOOP (while current exists)
   â”‚
   â”œâ”€ FETCH: Get category from ServiceNow API
   â”‚   GET /api/now/table/kb_category/{current}
   â”‚
   â”œâ”€ STORE: Insert category at FRONT of list
   â”‚   hierarchy.insert(0, category)
   â”‚   
   â”‚   Why position 0? To maintain rootâ†’child order
   â”‚   while traversing childâ†’root
   â”‚
   â”œâ”€ CHECK: Does category have a parent?
   â”‚   â”‚
   â”‚   â”œâ”€ YES â†’ Move up: current = category.parent_id
   â”‚   â”‚         Continue loop
   â”‚   â”‚
   â”‚   â””â”€ NO  â†’ Reached root, BREAK loop
   â”‚
   â””â”€ SAFETY: Stop if depth > 10 (prevent infinite loops)

4. RETURN
   â””â”€ hierarchy = [root, intermediate, ..., leaf]

================================================================================
DATA STRUCTURE
================================================================================

ServiceNow Category Object:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Category                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ sys_id:    "abc123..."              â”‚  â† Unique identifier
â”‚ label:     "IT"                     â”‚  â† Display name
â”‚ parent_id: {                        â”‚  â† Link to parent
â”‚   value: "xyz789..."                â”‚     (null if root)
â”‚ }                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Article â†’ Category Relationship:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Article    â”‚         â”‚  Category    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ number       â”‚         â”‚ sys_id       â”‚
â”‚ title        â”‚         â”‚ label        â”‚
â”‚ kb_category â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚ parent_id    â”‚
â”‚   .value     â”‚ refers  â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   to    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

================================================================================
EXAMPLE TRACE
================================================================================

Article: KB0011256
kb_category.value = "4538b686" (ã‚¤ãƒ™ãƒ³ãƒˆ)

Iteration 1:
  API: GET /kb_category/4538b686
  Result: {label: "ã‚¤ãƒ™ãƒ³ãƒˆ", parent_id: "a9614ac6"}
  Action: hierarchy = [ã‚¤ãƒ™ãƒ³ãƒˆ]
  Next: current = "a9614ac6"

Iteration 2:
  API: GET /kb_category/a9614ac6
  Result: {label: "æ±äº¬ã‚ªãƒ•ã‚£ã‚¹", parent_id: "7251c6c6"}
  Action: hierarchy = [æ±äº¬ã‚ªãƒ•ã‚£ã‚¹, ã‚¤ãƒ™ãƒ³ãƒˆ]
  Next: current = "7251c6c6"

Iteration 3:
  API: GET /kb_category/7251c6c6
  Result: {label: "ã‚ªãƒ•ã‚£ã‚¹", parent_id: "dfc19531"}
  Action: hierarchy = [ã‚ªãƒ•ã‚£ã‚¹, æ±äº¬ã‚ªãƒ•ã‚£ã‚¹, ã‚¤ãƒ™ãƒ³ãƒˆ]
  Next: current = "dfc19531"

Iteration 4:
  API: GET /kb_category/dfc19531
  Result: 404 Not Found (knowledge base, not category)
  Action: Stop traversal

Final Result:
  Path: ã‚ªãƒ•ã‚£ã‚¹ > æ±äº¬ã‚ªãƒ•ã‚£ã‚¹ > ã‚¤ãƒ™ãƒ³ãƒˆ
  Depth: 3 levels

================================================================================
KEY INSIGHTS
================================================================================

1. TRAVERSAL DIRECTION
   âœ“ We traverse UP (child â†’ root)
   âœ“ But store in reverse order (root â†’ child)
   âœ“ This is achieved by insert(0, ...) instead of append()

2. STOPPING CONDITIONS
   â€¢ No parent_id field
   â€¢ parent_id is null/empty
   â€¢ API returns 404 (not a category)
   â€¢ Max depth reached (safety)

3. ERROR HANDLING
   â€¢ Gracefully handle missing categories
   â€¢ Stop at knowledge base level
   â€¢ Prevent infinite loops with max_depth

4. OPTIMIZATION OPPORTUNITIES
   â€¢ Cache frequently accessed categories
   â€¢ Batch fetch multiple categories
   â€¢ Store full paths in database

================================================================================
VISUAL METAPHOR
================================================================================

Think of it like climbing a family tree:

    ğŸ  Great-Grandparent (root)
      â†‘
      â”‚ parent_id points UP
      â”‚
    ğŸ‘¤ Grandparent
      â†‘
      â”‚ parent_id points UP
      â”‚
    ğŸ‘¤ Parent
      â†‘
      â”‚ parent_id points UP
      â”‚
    ğŸ“„ You (start here)

We start at "You" and follow parent_id links upward until we reach
the root (Great-Grandparent), then return the list from root to you.

================================================================================
